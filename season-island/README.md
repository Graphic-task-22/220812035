# 四季海岛 3D场景

这是一个基于Three.js开发的3D游戏场景，模拟人物在海岛上度过一年四季的体验。

## 最新更新 (v1.1)

### 🔧 修复内容
- **修复角色穿模问题** - 调整了角色初始位置和地面检测逻辑
- **简化动画系统** - 只保留行走动画，移除了其他复杂动画
- **改进射线检测** - 增强了地面碰撞检测的准确性
- **优化性能** - 降低了移动速度，提高了游戏流畅度

### 🎮 当前功能
- **WASD控制** - 角色移动控制
- **行走动画** - 移动时自动播放行走动画
- **地面检测** - 角色正确站在海岛上
- **跟随摄像机** - 摄像机自动跟随角色
- **四季环境** - 可切换的季节和时间效果

## 功能特性

### 🎮 角色控制
- **WASD键** - 控制角色移动
- **空格键** - 跳跃
- **Shift键** - 奔跑
- **鼠标** - 控制视角

### 🌸 四季变化
- **春季** - 温暖的粉色天空，柔和的阳光
- **夏季** - 明亮的蓝色天空，强烈的阳光
- **秋季** - 橙色的天空，温和的阳光
- **冬季** - 淡蓝色的天空，柔和的阳光

### ⏰ 时间变化
- **早晨** - 温暖的粉色调
- **中午** - 明亮的阳光
- **傍晚** - 橙红色的夕阳
- **夜晚** - 深蓝色的夜空

### 🌦️ 天气效果
- **晴天** - 默认粒子效果
- **多云** - 柔和的粒子效果
- **雨天** - 雨滴粒子系统
- **雪天** - 雪花粒子系统

### 🎭 角色动画
- **行走** - 角色行走动画（唯一保留的动画）

## 技术特性

### 🎯 物理系统
- **射线检测** - 检测角色是否在地面上
- **碰撞检测** - 防止角色穿过障碍物
- **重力系统** - 真实的物理重力效果

### 📷 摄像机系统
- **跟随摄像机** - 摄像机自动跟随角色移动
- **平滑过渡** - 摄像机位置平滑过渡
- **视角控制** - 支持鼠标视角控制

### ✨ 粒子系统
- **动态粒子** - 根据天气自动切换粒子效果
- **性能优化** - 高效的粒子渲染
- **视觉效果** - 增强场景的真实感

## 安装和运行

### 环境要求
- Node.js 16.0 或更高版本
- npm 或 yarn 包管理器

### 安装步骤

1. 克隆项目
```bash
git clone [项目地址]
cd season-island
```

2. 安装依赖
```bash
npm install
# 或
yarn install
```

3. 启动开发服务器
```bash
npm run dev
# 或
vite dev
```

4. 打开浏览器访问
```
http://localhost:5173
```

### 测试页面
项目还包含一个测试页面 `test.html`，用于调试角色位置和动画：
```
http://localhost:5173/test.html
```

## 项目结构

```
season-island/
├── index.html              # 主页面
├── test.html               # 测试页面
├── package.json            # 项目配置
├── vite.config.js          # Vite配置
├── src/
│   ├── GameScene.js        # 主游戏场景类
│   ├── animation.js        # 角色动画管理
│   ├── ParticleSystem.js   # 粒子系统
│   ├── dao.js             # 模型加载工具
│   ├── universal.js       # 通用工具
│   ├── utils.js           # 工具函数和错误处理
│   └── models/            # 3D模型文件
│       ├── Assets/
│       │   └── role.glb   # 角色模型
│       └── statan/
│           └── shatan.glb # 海岛模型
```

## 使用说明

### 基本操作
1. 打开网页后，点击屏幕任意位置开始游戏
2. 使用WASD键控制角色移动
3. 使用鼠标控制视角
4. 按空格键跳跃
5. 按住Shift键奔跑

### 环境控制
1. 使用左侧控制面板选择季节
2. 选择不同的时间
3. 切换天气效果
4. 点击行走按钮控制动画

### 调试功能
- 打开浏览器控制台查看调试信息
- 使用测试页面 `test.html` 进行详细调试
- 调试快捷键：
  - **F1** - 显示场景信息
  - **F2** - 显示角色信息
  - **F3** - 显示性能报告

## 技术栈

- **Three.js** - 3D图形渲染引擎
- **Vite** - 构建工具
- **GLTFLoader** - 3D模型加载器
- **PointerLockControls** - 鼠标控制

## 开发说明

### 代码注释
所有代码都包含详细的中文注释，方便理解和修改。

### 模块化设计
项目采用模块化设计，每个功能都有独立的类：
- `GameScene` - 主游戏场景管理
- `ModelAnimation` - 角色动画管理
- `ParticleSystem` - 粒子系统管理
- `ErrorHandler` - 错误处理
- `DebugTools` - 调试工具

### 扩展性
项目设计具有良好的扩展性，可以轻松添加：
- 新的季节效果
- 更多的天气类型
- 额外的角色动画
- 新的交互功能

## 故障排除

### 常见问题
1. **角色穿模** - 已修复，如果仍有问题请检查模型文件
2. **动画不播放** - 确保模型包含正确的动画数据
3. **性能问题** - 可以调整粒子数量或降低渲染质量

### 调试步骤
1. 打开浏览器控制台查看错误信息
2. 使用测试页面检查角色位置
3. 检查模型文件路径是否正确
4. 确认WebGL支持

## 注意事项

1. 确保模型文件路径正确
2. 浏览器需要支持WebGL
3. 建议使用现代浏览器（Chrome、Firefox、Safari、Edge）
4. 如果模型加载失败，请检查控制台错误信息

## 许可证

MIT License

## 作者

[您的姓名]

---

享受在四季海岛中的探索之旅！🌴🌺❄️🍂 